import{_,r as p,o as l,c as d,a,b as u,w as y,d as f,t as g,e as F,f as V,g as j,h as w,i as v,F as b,j as C,s as J,k as h,l as q,m as x,v as T,C as M,n as P,D as R,p as N,q as H,u as G,x as z,y as K,z as Y,A as W}from"./vendor.e12962bf.js";const Q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}};Q();var X="/assets/logo.58befce5.png";const Z={methods:{goHome(){this.$router.push("/")}}},ee={class:"header-container"},te={class:"main-header flex items-center justify-between"},oe={class:"flex gap-1"},se=f("Home"),re=f("Toys"),ne=f("About"),ae=f("Dashboard"),ie=f("Our Shops"),le=f("User");function ce(e,t,o,n,s,r){const c=p("router-link");return l(),d("header",ee,[a("section",te,[a("img",{class:"logo",src:X,alt:"",onClick:t[0]||(t[0]=(...i)=>r.goHome&&r.goHome(...i))}),a("nav",oe,[u(c,{class:"link",to:"/"},{default:y(()=>[se]),_:1}),u(c,{class:"link",to:"/toy"},{default:y(()=>[re]),_:1}),u(c,{class:"link",to:"/about"},{default:y(()=>[ne]),_:1}),u(c,{class:"link",to:"/dashboard"},{default:y(()=>[ae]),_:1}),u(c,{class:"link",to:"/shop"},{default:y(()=>[ie]),_:1}),u(c,{class:"link",to:"/user"},{default:y(()=>[le]),_:1})])])])}var ue=_(Z,[["render",ce]]);const de={data(){return{currYear:2022}}},pe={class:"footer-container"},ye={class:"main-footer flex justify-center items-center"};function _e(e,t,o,n,s,r){return l(),d("footer",pe,[a("section",ye,[a("p",null,"\xA9 Coffeerights Shani Kupiec "+g(s.currYear),1)])])}var he=_(de,[["render",_e]]);const me={name:"app",created(){this.$store.dispatch({type:"loadToys"}),this.$store.dispatch({type:"loadLoggedInUser"})},methods:{},components:{appHeader:ue,appFooter:he}},ge={class:"main-layout"},fe={class:"main-app"};function ve(e,t,o,n,s,r){const c=p("app-header"),i=p("router-view"),m=p("app-footer");return l(),d("section",ge,[u(c),a("main",fe,[u(i)]),u(m)])}var we=_(me,[["render",ve]]),$e="/assets/pixar.3d5ca713.png";const ke={data(){return{}}},be=a("img",{src:$e,alt:""},null,-1),xe=[be];function Te(e,t,o,n,s,r){return l(),d("section",null,xe)}var Ce=_(ke,[["render",Te]]);const Le={};function Se(e,t){return l(),d("h1",null,"about")}var Ue=_(Le,[["render",Se]]);const De={},Be={class:"custom-card flex flex-col gap-1 items-center justify-between"};function Ie(e,t){return l(),d("article",Be,[a("header",null,[F(e.$slots,"header")]),a("main",null,[F(e.$slots,"default")]),a("footer",null,[F(e.$slots,"footer")])])}var A=_(De,[["render",Ie]]);const Ee={name:"toy-preview",props:{toy:{type:Object}},components:{customCard:A},created(){},data(){return{Delete:V,Edit:j}},methods:{removeToy(){this.$emit("removeToy",this.toy._id)}},computed:{formattedPrice(){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",currencyDisplay:"narrowSymbol"}).format(this.toy.price)}},unmounted(){},emits:["removeToy"]},Fe=["src"],Ae={key:0,class:"stock-sticker uppercase round"},Oe=f("Details");function Ne(e,t,o,n,s,r){const c=p("el-button"),i=p("router-link"),m=p("custom-card");return l(),w(m,{class:"toy-preview"},{header:y(()=>[a("h1",null,g(o.toy.name),1)]),footer:y(()=>[u(i,{to:"/toy/"+o.toy._id},{default:y(()=>[u(c,{type:"info",round:"",plain:""},{default:y(()=>[Oe]),_:1})]),_:1},8,["to"]),u(i,{to:"/toy/edit/"+o.toy._id},{default:y(()=>[u(c,{type:"primary",icon:s.Edit,circle:"",title:"Edit"},null,8,["icon"])]),_:1},8,["to"]),u(c,{type:"danger",icon:s.Delete,circle:"",onClick:r.removeToy,title:"Delete"},null,8,["icon","onClick"])]),default:y(()=>[a("img",{src:o.toy.img,alt:""},null,8,Fe),a("div",null,"created by "+g(o.toy.creator.fullname),1),a("div",null,g(r.formattedPrice),1),o.toy.inStock?v("",!0):(l(),d("div",Ae,"out of stock"))]),_:1})}var Ve=_(Ee,[["render",Ne]]);const Me={name:"toy-list",props:{toys:{type:Array,required:!0}},components:{toyPreview:Ve},created(){},data(){return{}},methods:{removeToy(e){this.$emit("removeToy",e)}},computed:{},unmounted(){},emits:["removeToy"]},Pe={class:"main-grid"};function Re(e,t,o,n,s,r){const c=p("toy-preview");return l(),d("section",Pe,[(l(!0),d(b,null,C(o.toys,i=>(l(),w(c,{key:i._id,toy:i,onRemoveToy:r.removeToy},null,8,["toy","onRemoveToy"]))),128))])}var je=_(Me,[["render",Re]]);const Je={name:"toy-filter",data(){return{filterBy:{name:"",labels:[],stock:"All",sortBy:""},options:["Doll","Battery Powered","Baby","Puzzle","Video Game"],Search:J}},methods:{setFilter(){this.$emit("setFilter",JSON.parse(JSON.stringify(this.filterBy)))}},created(){},mounted(){this.$refs.txtInput.focus()},emits:["setFilter"]},qe={class:"flex gap-2 justify-center items-center flex-col"},He={class:"flex gap-2 items-center justify-between"};function Ge(e,t,o,n,s,r){const c=p("el-input"),i=p("el-option"),m=p("el-select"),$=p("el-radio-button"),O=p("el-radio-group");return l(),d("section",qe,[u(c,{modelValue:s.filterBy.name,"onUpdate:modelValue":t[0]||(t[0]=k=>s.filterBy.name=k),ref:"txtInput",onInput:r.setFilter,class:"w-50 m-2",placeholder:"Search....","prefix-icon":s.Search},null,8,["modelValue","onInput","prefix-icon"]),a("section",He,[u(m,{modelValue:s.filterBy.labels,"onUpdate:modelValue":t[1]||(t[1]=k=>s.filterBy.labels=k),multiple:"",onChange:r.setFilter,placeholder:"Select",style:{width:"240px"}},{default:y(()=>[(l(!0),d(b,null,C(s.options,k=>(l(),w(i,{key:k,label:k,value:k},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),a("div",null,[u(O,{modelValue:s.filterBy.stock,"onUpdate:modelValue":t[2]||(t[2]=k=>s.filterBy.stock=k),onChange:r.setFilter},{default:y(()=>[u($,{label:"All"}),u($,{label:"In Stock"}),u($,{label:"Out Of Stock"})]),_:1},8,["modelValue","onChange"])])]),a("div",null,[u(O,{modelValue:s.filterBy.sortBy,"onUpdate:modelValue":t[3]||(t[3]=k=>s.filterBy.sortBy=k),onChange:r.setFilter},{default:y(()=>[u($,{label:"Name"}),u($,{label:"Price"}),u($,{label:"Time"})]),_:1},8,["modelValue","onChange"])])])}var ze=_(Je,[["render",Ge]]);const Ke={name:"carousel",components:{},created(){this.imgs=[];for(var e=0;e<12;e++)this.imgs.push(e)},data(){return{imgs:null}},methods:{},computed:{},unmounted(){}},Ye={class:"carousel"},We=["src"];function Qe(e,t,o,n,s,r){const c=p("el-carousel-item"),i=p("el-carousel");return l(),d("section",Ye,[u(i,{interval:4e3,type:"card",height:"300px"},{default:y(()=>[(l(!0),d(b,null,C(s.imgs,m=>(l(),w(c,{key:m},{default:y(()=>[a("img",{class:"img-in-card",src:"/src/assets/images/"+m+".png",alt:""},null,8,We)]),_:2},1024))),128))]),_:1})])}var Xe=_(Ke,[["render",Qe]]);const Ze={name:"toy-app",components:{toyList:je,toyFilter:ze,carousel:Xe},created(){},data(){return{}},methods:{setFilter(e){this.$store.dispatch({type:"filter",filterBy:e})},addNew(){this.$router.push("/toy/edit")},removeToy(e){console.log("removing",e),this.$store.dispatch({type:"removeToy",toyId:e})}},computed:{toys(){return this.$store.getters.toys},isLoading(){return this.$store.getters.isLoading}},unmounted(){}},et={class:"main-toy-app"},tt=f("Add New Toy"),ot=f("Loading");function st(e,t,o,n,s,r){const c=p("toy-filter"),i=p("el-button"),m=p("carousel"),$=p("toy-list");return l(),d("section",et,[u(c,{onSetFilter:r.setFilter},null,8,["onSetFilter"]),u(i,{onClick:r.addNew,round:"",class:"addBtn"},{default:y(()=>[tt]),_:1},8,["onClick"]),u(m),u($,{toys:r.toys,onRemoveToy:r.removeToy},null,8,["toys","onRemoveToy"]),r.isLoading?(l(),w(i,{key:0,type:"primary",loading:"",class:"loading"},{default:y(()=>[ot]),_:1})):v("",!0)])}var rt=_(Ze,[["render",st]]);const nt={name:"long-text",props:{text:String,length:Number},created(){this.isOpen=!1},data(){return{length:this.length||100,isTextLong:this.text.length>this.length,isOpen:!1}},methods:{textForDisplay(){return!this.isTextLong||this.isOpen?this.text:this.text.slice(0,this.length)},toggleTextLength(){this.isOpen=!this.isOpen}},computed:{textLink(){return this.isOpen?"see less":"... see more"}},unmounted(){}};function at(e,t,o,n,s,r){return l(),d("section",null,[a("p",null,[f(g(r.textForDisplay())+" ",1),s.isTextLong?(l(),d("span",{key:0,class:"long-text-link",onClick:t[0]||(t[0]=(...c)=>r.toggleTextLength&&r.toggleTextLength(...c))},g(r.textLink),1)):v("",!0)])])}var it=_(nt,[["render",at]]);const lt={name:"toy-review",props:{review:Object},components:{longText:it,customCard:A},created(){},data(){return{}},methods:{},computed:{formattedTime(){var e=new Date(this.review.createdAt);return e.toLocaleString()}},unmounted(){},emits:["remove-review"]},ct=["src"],ut={class:"writer-name"};function dt(e,t,o,n,s,r){const c=p("long-text"),i=p("custom-card");return l(),w(i,{class:"toy-review"},{header:y(()=>[a("img",{class:"user-img",src:"/src/assets/images/user_icon_"+o.review.idImg+".png"},null,8,ct),a("div",ut,g(o.review.creator),1)]),footer:y(()=>[u(c,{text:o.review.txt,length:30},null,8,["text"])]),default:y(()=>[a("span",null,g("\u2B50".repeat(o.review.rating)),1),a("span",null,g(this.formattedTime),1)]),_:1})}var pt=_(lt,[["render",dt]]);const yt={name:"toy-details",components:{toyReview:pt,customCard:A},data(){return{toy:null,Delete:V}},async created(){const{toyId:e}=this.$route.params;this.toy=await this.$store.dispatch({type:"getToyById",toyId:e})},methods:{async removeToy(){await this.$store.dispatch({type:"removeToy",toyId:this.toy._id}),this.goBack()},goBack(){this.$router.push("/toy")}},computed:{formattedTime(){var e=new Date(this.toy.createdAt);return e.toLocaleString()},formattedPrice(){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",currencyDisplay:"narrowSymbol"}).format(this.toy.price)}}},_t={key:0,class:"stock-sticker uppercase round"},ht={key:1,class:"clean-list"},mt={class:"grey"},gt={key:0},ft=f("Back");function vt(e,t,o,n,s,r){const c=p("toy-review"),i=p("el-button"),m=p("custom-card");return s.toy?(l(),w(m,{key:0,class:"toy-details"},{header:y(()=>[a("span",null,g(s.toy.name),1),a("div",null,g(r.formattedPrice),1)]),footer:y(()=>[u(i,{type:"info",onClick:r.goBack,round:""},{default:y(()=>[ft]),_:1},8,["onClick"]),u(i,{type:"danger",icon:s.Delete,circle:"",onClick:r.removeToy,title:"Delete"},null,8,["icon","onClick"])]),default:y(()=>[s.toy.inStock?v("",!0):(l(),d("div",_t,"out of stock")),s.toy.reviews.length?(l(),d("ul",ht,[(l(!0),d(b,null,C(s.toy.reviews,$=>(l(),d("li",{key:$},[u(c,{review:$},null,8,["review"])]))),128))])):v("",!0),a("section",mt,[s.toy.labels.length?(l(),d("div",gt,"Labled as: "+g(s.toy.labels.join(", ")),1)):v("",!0),a("div",null,"on sale since "+g(r.formattedTime),1)])]),_:1})):v("",!0)}var wt=_(yt,[["render",vt]]);const $t={getRandomInt:kt};function kt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}h.defaults.withCredentials=!0;function S(e=""){return`/api/toy/${e}`}const L={query:bt,remove:Ct,save:Tt,getById:xt,getEmptyToy:Lt};async function bt(e){return(await h.get(S(),{params:e},{withCredentials:!0})).data}async function xt(e){return(await h.get(S(e),{withCredentials:!0})).data}async function Tt(e){return(e._id?await h.put(S(e._id),e,{withCredentials:!0}):await h.post(S(),e,{withCredentials:!0})).data}function Ct(e){return h.delete(S(e),{withCredentials:!0})}function Lt(){const e=`src/assets/images/${$t.getRandomInt(0,11)}.png`;return console.log(e),{name:"",price:1,labels:[],inStock:!0,reviews:[],img:e}}const St={name:"toy-edit",async created(){const{toyId:e}=this.$route.params;e?this.toyToEdit=await this.$store.dispatch({type:"getToyById",toyId:e}):this.toyToEdit=L.getEmptyToy()},components:{},data(){return{toyToEdit:null,Check:q}},methods:{async save(){try{await this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}),this.goBack()}catch(e){console.log("err",e)}},goBack(){this.$router.push("/toy")}}},Ut={key:0},Dt=["checked"],Bt=a("label",{for:"stock"},"in stock",-1),It=f("Back");function Et(e,t,o,n,s,r){const c=p("el-button");return l(),d(b,null,[s.toyToEdit?(l(),d("section",Ut,[x(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=i=>s.toyToEdit.name=i),title:"toy name"},null,512),[[T,s.toyToEdit.name]]),x(a("input",{type:"number",min:"1","onUpdate:modelValue":t[1]||(t[1]=i=>s.toyToEdit.price=i),title:"price"},null,512),[[T,s.toyToEdit.price]]),a("input",{type:"checkbox",id:"stock",onChange:t[2]||(t[2]=i=>s.toyToEdit.inStock=!s.toyToEdit.inStock),checked:s.toyToEdit.inStock},null,40,Dt),Bt,u(c,{type:"success",onClick:r.save,icon:s.Check,circle:"",title:"Save"},null,8,["onClick","icon"])])):v("",!0),u(c,{type:"info",onClick:r.goBack,round:""},{default:y(()=>[It]),_:1},8,["onClick"])],64)}var Ft=_(St,[["render",Et]]);M.register(...P);const At={name:"chart1",components:{DoughnutChart:R},created(){this.preperDate()},data(){return{testData:{labels:[],datasets:[{data:[],backgroundColor:["#FFCFDF","#FEFDCA","#A5DEE5","#D9D7F1","#E0F9B5"]}]}}},methods:{preperDate(){const e=this.$store.getters.toys.reduce((t,o)=>(o.labels.forEach(n=>{t[n]?(t[n].total+=o.price,t[n].amount++):t[n]={total:o.price,amount:1}}),t),{});for(const t in e)this.testData.labels.push(t),this.testData.datasets[0].data.push(e[t].total/e[t].amount)}}},Ot=a("h1",{class:"text-center"},"Average prices per toy type",-1);function Nt(e,t,o,n,s,r){const c=p("DoughnutChart");return l(),d(b,null,[Ot,u(c,{chartData:s.testData},null,8,["chartData"])],64)}var Vt=_(At,[["render",Nt]]);M.register(...P);const Mt={name:"chart2",components:{DoughnutChart:R},created(){this.showPrices()},data(){return{testData:{labels:[],datasets:[{data:[],backgroundColor:["#FFCFDF","#FEFDCA","#A5DEE5","#D9D7F1","#E0F9B5","#e0e0e0"]}]}}},methods:{showPrices(){const e=this.$store.getters.toys;var t=e.reduce((n,s)=>(s.inStock||n++,n),0);this.testData.labels.push("Out of stock"),this.testData.datasets[0].data.push(t);var o=e.reduce((n,s)=>(s.inStock&&s.labels.forEach(r=>{n[r]?n[r]++:n[r]=1}),n),{});for(const n in o)this.testData.labels.push(n),this.testData.datasets[0].data.push(o[n])}}},Pt=a("h1",{class:"text-center"},"Percentage of toys that are in stock by type",-1);function Rt(e,t,o,n,s,r){const c=p("DoughnutChart");return l(),d(b,null,[Pt,u(c,{chartData:s.testData},null,8,["chartData"])],64)}var jt=_(Mt,[["render",Rt]]);const Jt={name:"toy-dashboard",components:{chart1Cmp:Vt,chart2Cmp:jt},created(){},data(){return{}},computed:{isToys(){return this.$store.getters.toys.length}}},qt=a("br",null,null,-1),Ht=a("br",null,null,-1),Gt=a("br",null,null,-1);function zt(e,t,o,n,s,r){const c=p("chart1-cmp"),i=p("chart2-cmp");return l(),d(b,null,[r.isToys?(l(),w(c,{key:0})):v("",!0),qt,Ht,Gt,r.isToys?(l(),w(i,{key:1})):v("",!0)],64)}var Kt=_(Jt,[["render",zt]]);const Yt={name:"App",data(){return{center:{lat:32.091996,lng:34.959813},markers:[{id:"dfsldjl3r",position:{lat:32.091996,lng:34.959813}},{id:"wertyu",position:{lat:32.349664,lng:34.920358}},{id:"lkjhygtrf",position:{lat:31.998558,lng:34.780134}}]}}};function Wt(e,t,o,n,s,r){const c=p("GMapMarker"),i=p("GMapMap");return l(),w(i,{center:s.center,zoom:10,"map-type-id":"terrain",style:{width:"500px",height:"300px"}},{default:y(()=>[(l(!0),d(b,null,C(s.markers,m=>(l(),w(c,{key:m.id,position:m.position},null,8,["position"]))),128))]),_:1},8,["center"])}var Qt=_(Yt,[["render",Wt]]);const Xt={data(){return{fullname:"",username:"",password:""}},computed:{async usersList(){try{return await this.$store.dispatch({type:"loadUsers"})}catch(e){console.log(e)}},loggedinUser(){return this.$store.getters.loggedInUser},isLoading(){return this.$store.getters.isLoading}},methods:{async login(){try{const e={username:this.username,password:this.password};await this.$store.dispatch({type:"login",userInfo:e})}catch(e){console.log(e)}},async signup(){try{const e={fullname:this.fullname,username:this.username,password:this.password};await this.$store.dispatch({type:"saveUser",user:e})}catch(e){console.log(e)}},async logout(){try{await this.$store.dispatch({type:"logout"})}catch(e){console.log(e)}}}},Zt=f("Loading"),eo={key:1},to={key:0},oo={key:2},so=a("h4",null,"Login",-1),ro=a("button",null,"Login",-1),no=a("hr",null,null,-1),ao=a("h4",null,"Signup",-1),io=a("button",null,"Signup",-1);function lo(e,t,o,n,s,r){const c=p("el-button");return l(),d("section",null,[r.isLoading?(l(),w(c,{key:0,type:"primary",loading:"",class:"loading"},{default:y(()=>[Zt]),_:1})):v("",!0),r.loggedinUser?(l(),d("section",eo,[a("pre",null,g(r.loggedinUser),1),r.loggedinUser.isAdmin?(l(),d("ul",to,[(l(!0),d(b,null,C(r.usersList,i=>(l(),d("li",{key:i._id},[a("pre",null,g(i),1)]))),128))])):v("",!0),a("button",{onClick:t[0]||(t[0]=(...i)=>r.logout&&r.logout(...i))},"Logout")])):(l(),d("section",oo,[so,a("form",{onSubmit:t[3]||(t[3]=N((...i)=>r.login&&r.login(...i),["prevent"]))},[x(a("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=i=>s.username=i),placeholder:"Enter username"},null,512),[[T,s.username]]),x(a("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=i=>s.password=i),placeholder:"Enter password"},null,512),[[T,s.password]]),ro],32),no,ao,a("form",{onSubmit:t[7]||(t[7]=N((...i)=>r.signup&&r.signup(...i),["prevent"]))},[x(a("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=i=>s.fullname=i),placeholder:"Enter fullname"},null,512),[[T,s.fullname]]),x(a("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=i=>s.username=i),placeholder:"Enter username"},null,512),[[T,s.username]]),x(a("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=i=>s.password=i),placeholder:"Enter password"},null,512),[[T,s.password]]),io],32)]))])}var co=_(Xt,[["render",lo]]);const uo=H({history:G("/"),routes:[{path:"/",name:"home",component:Ce},{path:"/about",name:"about",component:Ue},{path:"/dashboard",name:"dashboard",component:Kt},{path:"/shop",name:"shop-map",component:Qt},{path:"/user",name:"user-page",component:co},{path:"/toy",name:"toy-app",component:rt},{path:"/toy/:toyId",name:"toy-details",component:wt},{path:"/toy/edit/:toyId?",name:"edit",component:Ft}]});var po={state:{toys:[],filterBy:null},getters:{toys(e){return e.toys}},mutations:{setToys(e,{toys:t}){e.toys=t},removeToy(e,{toyId:t}){const o=e.toys.findIndex(n=>n._id===t);e.toys.splice(o,1)},saveToy(e,{savedToy:t}){const o=e.toys.findIndex(n=>n._id===t._id);o!==-1?e.toys.splice(o,1,t):e.toys.unshift(t)},setFilter(e,{filterBy:t}){e.filterBy=t}},actions:{async loadToys({commit:e,state:t}){e({type:"setIsLoading",isLoading:!0});try{const o=await L.query(t.filterBy);e({type:"setToys",toys:o})}catch(o){console.log("err",o)}finally{e({type:"setIsLoading",isLoading:!1})}},async removeToy({commit:e},{toyId:t}){try{await L.remove(t),e({type:"removeToy",toyId:t})}catch(o){console.log("err",o)}},async getToyById(e,{toyId:t}){try{const o=await L.getById(t);return JSON.parse(JSON.stringify(o))}catch(o){console.log("err",o)}},async saveToy({commit:e},{toy:t}){const o=JSON.parse(JSON.stringify(t));try{const n=await L.save(o);e({type:"saveToy",savedToy:n})}catch(n){console.log("err",n)}},async filter({commit:e,dispatch:t},{filterBy:o}){e({type:"setFilter",filterBy:o}),t({type:"loadToys"})}}};h.defaults.withCredentials=!0;function I(e=""){return`/api/user/${e}`}const D={query:yo,getById:_o,update:ho,remove:mo};async function yo(e={}){try{return(await h.get(I(),{params:e},{withCredentials:!0})).data}catch(t){throw console.log("err",t),t}}async function _o(e){try{return(await h.get(`${I()}/${e}`,{withCredentials:!0})).data}catch(t){throw console.log("err",t),t}}async function ho(e){try{return(await h.get(`${I()}/${e._id}`,e,{withCredentials:!0})).data}catch(t){throw console.log("err",t),t}}async function mo(e){try{await h.delete(I("user",e),{withCredentials:!0})}catch(t){throw console.log("err",t),t}}h.defaults.withCredentials=!0;function E(e=""){return`/api/auto/${e}`}const B={login:go,signup:fo,logout:vo,getLoggedinUser:wo};async function go({username:e,password:t}){try{return(await h.post(`${E()}/login`,{username:e,password:t},{withCredentials:!0})).data}catch(o){throw console.log("err",o),o}}async function fo({fullname:e,username:t,password:o}){try{return(await h.post(`${E()}/signup`,{fullname:e,username:t,password:o},{withCredentials:!0})).data}catch(n){throw console.log("err",n),n}}async function vo(){try{await h.post(`${E()}/logout`,{withCredentials:!0})}catch(e){throw console.log("err",e),e}}async function wo(){try{await h.get(`${E()}/loggedInUser`,{withCredentials:!0})}catch(e){throw console.log("err",e),e}}var $o={state:{users:[],loggedInUser:null,filterBy:{}},getters:{users(e){return e.users},loggedInUser(e){return e.loggedInUser}},mutations:{setUsers(e,{users:t}){e.users=t},setLoggedInUser(e,{loggedInUser:t}){e.loggedInUser=t},removeUser(e,{userId:t}){const o=e.users.findIndex(n=>n._id===t);e.users.splice(o,1)},saveUser(e,{savedUser:t}){const o=e.users.findIndex(n=>n._id===t._id);o!==-1?e.users.splice(o,1,t):e.users.unshift(t)},setFilter(e,{filterBy:t}){e.filterBy=t}},actions:{async loadUsers({commit:e,state:t}){e({type:"setIsLoading",isLoading:!0});try{const o=await D.query(t.filterBy);e({type:"setUsers",users:o})}catch(o){console.log("err",o)}finally{e({type:"setIsLoading",isLoading:!1})}},async loadLoggedInUser({commit:e,state:t}){e({type:"setIsLoading",isLoading:!0});try{const o=await B.getLoggedinUser();e({type:"setLoggedInUser",loggedInUser:o})}catch(o){console.log("err",o)}finally{e({type:"setIsLoading",isLoading:!1})}},async removeUser({commit:e},{userId:t}){try{await D.remove(t),e({type:"removeUser",userId:t})}catch(o){console.log("err",o)}},async getUserById(e,{userId:t}){try{const o=await D.getById(t);return JSON.parse(JSON.stringify(o))}catch(o){console.log("err",o)}},async saveUser({commit:e},{user:t}){const o=JSON.parse(JSON.stringify(t));try{const n=t._id?await D.update(o):await B.signup(t);e({type:"saveUser",savedUser:n})}catch(n){console.log("err",n)}},async login({commit:e},{userInfo:t}){try{await B.login(t)}catch(o){console.log("err",o)}},async logout({commit:e}){try{await B.logout()}catch(t){console.log("err",t)}},async filter({commit:e,dispatch:t},{filterBy:o}){e({type:"setFilter",filterBy:o}),t({type:"loadUsers"})}}};const ko=z({strict:!0,state:{isLoading:!1},getters:{isLoading(e){return e.isLoading}},mutations:{setIsLoading(e,{isLoading:t}){e.isLoading=t}},actions:{},modules:{toyModules:po,userModules:$o}});const U=K(we);U.use(Y);U.use(uo);U.use(ko);U.use(W,{load:{key:""}});U.mount("#app");
